import"./modulepreload-polyfill-B5Qt9EMX.js";import{r as l,j as e,c as F}from"./vendor-react-C7s9o2DG.js";/* empty css               */import{c as q,b as _}from"./openai-hooks-BWAW4MV6.js";import{u as A}from"./use-openai-global-BoyuTJe3.js";import{u as T,M as V,P as z}from"./use-widget-state-BY4DWEMi.js";import{A as D,m as p}from"./vendor-motion-BjihEFgE.js";import{c as b}from"./createLucideIcon-BuO2Rf-V.js";import{A as I}from"./arrow-left-BiHbGaFA.js";import{M as B}from"./map-pin-CP1HI6IO.js";import"./index-CYBJUsK9.js";const R=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],H=b("check",R);const L=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],G=b("credit-card",L);const W=[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16v5h-5",key:"1ck2sf"}],["path",{d:"M21 8V3h-5",key:"1qoq8a"}],["path",{d:"M3 16v5h5",key:"1t08am"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 8V3h5",key:"1ln10m"}],["path",{d:"M9 9 3 3",key:"v551iv"}]],Y=b("expand",W);const Q=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],U=b("shopping-bag",Q);const X=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Z=b("truck",X),J=[{id:"margherita",name:"Margherita Pizza",price:14.99,quantity:1,image:"https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=200&h=200&fit=crop",description:"Fresh tomatoes, mozzarella, basil"},{id:"pepperoni",name:"Pepperoni Pizza",price:16.99,quantity:2,image:"https://images.unsplash.com/photo-1628840042765-356cda07504e?w=200&h=200&fit=crop",description:"Classic pepperoni with extra cheese"},{id:"garlic-bread",name:"Garlic Bread",price:5.99,quantity:1,image:"https://images.unsplash.com/photo-1619535860434-ba1d8fa12536?w=200&h=200&fit=crop",description:"Crispy with garlic butter"}],g=2.99,K={standard:0,express:4.99},ee=.0875,S=()=>({view:"cart",items:J,deliveryOption:"standard",tipPercent:10}),w={initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20}};function se(){const c=A("toolOutput"),[r,t]=T(()=>{const i=S();return c?.items?{...i,items:c.items}:c?.view?{...i,view:c.view}:i}),d=l.useMemo(()=>r?.items??[],[r?.items]),o=r?.view??"cart",m=r?.deliveryOption??"standard",a=r?.tipPercent??10,{mode:u,requestMode:f}=q(),y=_(),N=l.useCallback(async()=>{f&&await f({mode:"fullscreen"})},[f]),x=l.useMemo(()=>d.reduce((i,n)=>i+n.price*n.quantity,0),[d]),s=K[m],j=x*(a/100),k=(x+g+s)*ee,v=x+g+s+j+k,E=l.useCallback((i,n)=>{t(M=>({...M,items:(M?.items??[]).map(h=>h.id===i?{...h,quantity:Math.max(0,h.quantity+n)}:h).filter(h=>h.quantity>0)}))},[t]),C=l.useCallback(i=>{t(n=>({...n,view:i}))},[t]),$=l.useCallback(i=>{t(n=>({...n,deliveryOption:i}))},[t]),O=l.useCallback(i=>{t(n=>({...n,tipPercent:i}))},[t]),P=l.useCallback(()=>{const i=`PZ-${Date.now().toString(36).toUpperCase()}`;t(n=>({...n,view:"confirmation",orderId:i})),y&&y(`Order ${i} placed successfully! Total: $${v.toFixed(2)}`)},[y,t,v]);return e.jsx("div",{className:"min-h-[400px] rounded-2xl border shadow-sm overflow-hidden bg-surface text-primary border-subtle",children:e.jsxs(D,{mode:"wait",children:[o==="cart"&&e.jsx(p.div,{variants:w,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.2},children:e.jsx(te,{items:d,subtotal:x,displayMode:u,onQuantityChange:E,onCheckout:()=>C("checkout"),onExpand:N})},"cart"),o==="checkout"&&e.jsx(p.div,{variants:w,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.2},children:e.jsx(ae,{subtotal:x,serviceFee:g,deliveryFee:s,deliveryOption:m,tip:j,tipPercent:a,tax:k,total:v,onBack:()=>C("cart"),onSetDelivery:$,onSetTip:O,onPlaceOrder:P})},"checkout"),o==="confirmation"&&e.jsx(p.div,{variants:w,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.2},children:e.jsx(ie,{orderId:r?.orderId??"",total:v,onNewOrder:()=>{t(S())}})},"confirmation")]})})}function te({items:c,subtotal:r,displayMode:t,onQuantityChange:d,onCheckout:o,onExpand:m}){return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"px-4 py-3 border-b border-subtle",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("h2",{className:"font-semibold",children:"Your Order"}),e.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-surface-tertiary text-secondary",children:[c.reduce((a,u)=>a+u.quantity,0)," items"]})]}),t==="inline"&&e.jsx("button",{onClick:m,className:"p-1.5 rounded-full transition-colors hover:bg-surface-secondary","aria-label":"Expand to fullscreen",children:e.jsx(Y,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"flex-1 overflow-auto p-4 space-y-3",children:c.map(a=>e.jsxs(p.div,{layout:!0,className:"flex items-center gap-3 p-3 rounded-xl bg-surface-secondary",children:[e.jsx("img",{src:a.image,alt:a.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-sm",children:a.name}),e.jsx("p",{className:"text-xs text-secondary",children:a.description}),e.jsxs("p",{className:"text-sm font-semibold mt-1",children:["$",(a.price*a.quantity).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>d(a.id,-1),className:"p-1.5 rounded-full hover:bg-surface-tertiary",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center text-sm font-medium",children:a.quantity}),e.jsx("button",{onClick:()=>d(a.id,1),className:"p-1.5 rounded-full hover:bg-surface-tertiary",children:e.jsx(z,{className:"w-4 h-4"})})]})]},a.id))}),e.jsxs("div",{className:"px-4 py-3 border-t border-subtle",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-secondary",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["$",r.toFixed(2)]})]}),e.jsx("button",{onClick:o,disabled:c.length===0,className:"w-full py-3 px-4 rounded-xl text-sm font-medium bg-success-solid hover:bg-success-solid-hover disabled:opacity-50 disabled:cursor-not-allowed text-success-solid transition-colors",children:"Continue to Checkout"})]})]})}function ae({subtotal:c,serviceFee:r,deliveryFee:t,deliveryOption:d,tip:o,tipPercent:m,tax:a,total:u,onBack:f,onSetDelivery:y,onSetTip:N,onPlaceOrder:x}){return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"px-4 py-3 border-b border-subtle",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:f,className:"p-1 rounded-full hover:bg-surface-secondary",children:e.jsx(I,{className:"w-5 h-5"})}),e.jsx("h2",{className:"font-semibold",children:"Checkout"})]})}),e.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[e.jsx("section",{className:"p-4 rounded-xl bg-surface-secondary",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(B,{className:"w-5 h-5 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-sm",children:"Delivery Address"}),e.jsx("p",{className:"text-sm text-secondary",children:"123 Main Street, Apt 4B"}),e.jsx("p",{className:"text-xs text-tertiary",children:"San Francisco, CA 94102"})]})]})}),e.jsxs("section",{children:[e.jsxs("h3",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4"})," Delivery Speed"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"standard",label:"Standard",time:"45-60 min",price:"Free"},{id:"express",label:"Express",time:"20-30 min",price:"$4.99"}].map(s=>e.jsxs("button",{onClick:()=>y(s.id),className:`p-3 rounded-xl border text-left transition-colors ${d===s.id?"border-success-outline bg-success-soft":"border-subtle hover:border-strong"}`,children:[e.jsx("p",{className:"font-medium text-sm",children:s.label}),e.jsx("p",{className:"text-xs text-secondary",children:s.time}),e.jsx("p",{className:"text-sm font-semibold text-success mt-1",children:s.price})]},s.id))})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"font-medium text-sm mb-2",children:"Delivery Tip"}),e.jsx("div",{className:"flex gap-2",children:[0,10,15,20].map(s=>e.jsx("button",{onClick:()=>N(s),className:`flex-1 py-2 px-3 rounded-xl text-sm font-medium transition-colors ${m===s?"bg-success-solid text-success-solid":"bg-surface-secondary hover:bg-surface-tertiary"}`,children:s===0?"None":`${s}%`},s))})]}),e.jsx("section",{className:"p-4 rounded-xl bg-surface-secondary",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-sm",children:"Payment Method"}),e.jsx("p",{className:"text-sm text-secondary",children:"•••• •••• •••• 4242"})]}),e.jsx("span",{className:"text-xs text-tertiary",children:"Change"})]})}),e.jsxs("section",{className:"p-4 rounded-xl space-y-2 bg-surface-secondary",children:[e.jsx("h3",{className:"font-medium text-sm mb-3",children:"Order Summary"}),[{label:"Subtotal",value:c},{label:"Service Fee",value:r},{label:"Delivery",value:t},{label:`Tip (${m}%)`,value:o},{label:"Tax",value:a}].map(({label:s,value:j})=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-secondary",children:s}),e.jsxs("span",{children:["$",j.toFixed(2)]})]},s)),e.jsxs("div",{className:"flex justify-between text-sm font-semibold pt-2 border-t border-subtle",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",u.toFixed(2)]})]})]})]}),e.jsx("div",{className:"px-4 py-3 border-t border-subtle",children:e.jsxs("button",{onClick:x,className:"w-full py-3 px-4 rounded-xl text-sm font-medium bg-success-solid hover:bg-success-solid-hover text-success-solid transition-colors",children:["Place Order • $",u.toFixed(2)]})})]})}function ie({orderId:c,total:r,onNewOrder:t}){return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-6 text-center",children:[e.jsx(p.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"w-16 h-16 rounded-full bg-success-solid flex items-center justify-center mb-4",children:e.jsx(H,{className:"w-8 h-8 text-success-solid"})}),e.jsxs(p.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Order Confirmed!"}),e.jsxs("p",{className:"text-sm mb-1 text-secondary",children:["Order #",c]}),e.jsxs("p",{className:"text-sm mb-6 text-secondary",children:["Total: $",r.toFixed(2)]}),e.jsxs("div",{className:"p-4 rounded-xl mb-6 bg-surface-secondary",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Estimated Delivery"}),e.jsx("p",{className:"text-lg font-semibold text-success",children:"45-60 minutes"})]}),e.jsx("button",{onClick:t,className:"py-2 px-6 rounded-xl text-sm font-medium transition-colors bg-surface-secondary hover:bg-surface-tertiary",children:"Start New Order"})]})]})}F.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(se,{})}));

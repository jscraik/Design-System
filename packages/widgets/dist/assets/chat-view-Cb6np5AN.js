import"./modulepreload-polyfill-B5Qt9EMX.js";import{r as o,j as e,c as ae}from"./vendor-react-C7s9o2DG.js";import{H as se,c as le}from"./index-CYBJUsK9.js";import{G as z,T as ie,K as de,R as Q,N as U,B as ce,u as ue,f as fe,e as me}from"./index-CvqQmilw.js";/* empty css               */function be({selectedModel:s,composerLeft:d,composerRight:i,emptyState:c,messages:u,onMessageAction:C}){const m=o.useRef(null),[M,S]=o.useState(!1),b=o.useCallback(()=>{const r=m.current;if(!r)return;const E=r.scrollHeight-r.scrollTop-r.clientHeight<100;S(!E)},[]),L=()=>{const r=m.current;r&&r.scrollTo({top:r.scrollHeight,behavior:"smooth"})};return o.useEffect(()=>{const r=m.current;if(r)return b(),r.addEventListener("scroll",b),()=>{r.removeEventListener("scroll",b)}},[b]),e.jsxs("div",{className:"flex-1 flex flex-col relative h-full overflow-hidden",children:[e.jsx("div",{ref:m,className:"flex-1 overflow-y-auto pb-[180px]",children:e.jsx(ce,{emptyState:c,messages:u,onMessageAction:C})}),M&&e.jsx("button",{type:"button",onClick:L,"aria-label":"Scroll to bottom",title:"Scroll to bottom",className:"absolute bottom-[200px] left-1/2 -translate-x-1/2 z-10 flex items-center justify-center size-10 bg-secondary dark:bg-secondary hover:bg-secondary/80 dark:hover:bg-secondary/80 border border-muted dark:border-muted rounded-full shadow-lg transition-all duration-200 ease-out hover:scale-110",children:e.jsx(ue,{className:"size-5 text-foreground dark:text-foreground"})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-background dark:bg-background",children:e.jsx(fe,{selectedModel:s,composerLeft:d,composerRight:i})})]})}function he(s){const[d,i]=o.useState(()=>typeof window>"u"?!1:window.matchMedia(s).matches);return o.useEffect(()=>{const c=window.matchMedia(s),u=()=>i(c.matches);return u(),c.addEventListener?.("change",u),()=>c.removeEventListener?.("change",u)},[s]),d}function ee(s){const d=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(",");return Array.from(s.querySelectorAll(d)).filter(i=>!i.hasAttribute("disabled")&&i.getAttribute("aria-hidden")!=="true")}function ge({mode:s,defaultMode:d="twoPane",onModeChange:i,sidebarOpen:c,defaultSidebarOpen:u=!0,onSidebarOpenChange:C,viewMode:m,defaultViewMode:M="chat",onViewModeChange:S,defaultModel:b,mobileBreakpointPx:L=768,onSidebarToggle:r,headerRight:E,slots:D,composerLeft:B,composerRight:K,emptyState:q,loading:v=!1,error:p,disabled:H=!1,required:R,onStateChange:V}){const T=v?"loading":p?"error":H?"disabled":"default";o.useEffect(()=>{V?.(T)},[T,V]);const te=H||v,oe=he(`(max-width: ${L}px)`),P=o.useMemo(()=>D??{},[D]),[y]=z({value:s,defaultValue:d,onChange:i}),[h,k]=z({value:c,defaultValue:u,onChange:C}),f=o.useRef(null),G=o.useRef(!1),I=o.useRef(null),[A,W]=o.useState(b??{name:"Auto",shortName:"Auto",description:"Decides how long to think"}),[O,$]=z({value:m,defaultValue:M,onChange:S}),n=y==="twoPane"||y==="full"?y==="twoPane"?oe?"overlay":"inline":"overlay":"none",j=o.useCallback(t=>{r&&r({desktopOpen:n==="inline"?t:!1,overlayOpen:n==="overlay"?t:!1})},[r,n]),g=o.useCallback(()=>{k(!1),j(!1);const t=f.current;t&&typeof t.focus=="function"&&t.focus(),f.current=null},[j,k]),w=o.useCallback(()=>{if(n!=="none"){if(n==="overlay"){h?g():(f.current=document.activeElement,k(!0),j(!0));return}k(t=>{const a=!t;return j(a),a})}},[n,h,g,j,k]),l=n==="overlay"&&h;o.useEffect(()=>{l&&!f.current&&(f.current=document.activeElement)},[l]),o.useEffect(()=>{if(G.current&&!l){const t=f.current;t&&typeof t.focus=="function"&&t.focus(),f.current=null}G.current=l},[l]),o.useEffect(()=>{const t=a=>{if((a.metaKey||a.ctrlKey)&&(a.key==="b"||a.key==="B")){if(n==="none")return;a.preventDefault(),w()}l&&a.key==="Escape"&&(a.preventDefault(),g())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[g,l,n,w]),o.useEffect(()=>{if(!l)return;const t=I.current;if(!t)return;const a=()=>{(ee(t)[0]??t).focus?.()},ne=window.setTimeout(a,0),Y=x=>{if(x.key!=="Tab")return;const N=ee(t);if(N.length===0){x.preventDefault();return}const Z=N[0],_=N[N.length-1],F=document.activeElement;!x.shiftKey&&F===_?(x.preventDefault(),Z.focus()):x.shiftKey&&F===Z&&(x.preventDefault(),_.focus())};return document.addEventListener("keydown",Y),()=>{window.clearTimeout(ne),document.removeEventListener("keydown",Y)}},[l]);const J=n==="none"?!1:h,X=o.useCallback(t=>{if(typeof t=="string"){W({name:t,shortName:t,description:""});return}W(t)},[]),re=o.useMemo(()=>y==="dashboard"?e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx("div",{className:"p-4 text-text-secondary",children:"Dashboard template placeholder"})}):e.jsxs("div",{className:"flex-1 flex flex-col bg-background dark:bg-background",children:[e.jsx(ie,{isSidebarOpen:J,onSidebarToggle:w,showSidebarToggle:!0,selectedModel:A,onModelChange:X,viewMode:O,onViewModeChange:$,headerRight:E}),O==="compose"?e.jsx(de,{}):e.jsx(be,{selectedModel:A,composerLeft:B,composerRight:K,emptyState:q})]}),[y,J,w,A,X,O,$,E,B,K,q]);return e.jsxs("div",{className:"min-h-screen w-full flex bg-background dark:bg-background overflow-hidden","data-testid":"chat-ui-root","data-state":T,"data-error":p?"true":void 0,"data-required":R?"true":void 0,"aria-disabled":te||void 0,"aria-invalid":p?"true":R?"false":void 0,"aria-required":R||void 0,"aria-busy":v||void 0,children:[v&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-background/80 dark:bg-background/80",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading chat..."})}),p&&!v&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-background/80 dark:bg-background/80",children:e.jsx("div",{className:"text-status-error",children:p})}),n==="inline"?e.jsx(Q,{value:P,children:e.jsx(U,{isOpen:!0,onToggle:w})}):null,n==="overlay"&&h?e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("button",{type:"button","aria-label":"Close sidebar",className:"absolute inset-0 bg-background/50 backdrop-blur-sm",onClick:g}),e.jsx("div",{ref:I,role:"dialog","aria-modal":"true","aria-label":"Sidebar",tabIndex:-1,className:"absolute left-0 top-0 h-full w-64 outline-none",children:e.jsx(Q,{value:P,children:e.jsx(U,{isOpen:h,onToggle:g})})})]}):null,e.jsx("div",{className:"flex-1 flex min-w-0 min-h-0",children:re})]})}function xe(){const s=le();return e.jsx(se,{host:s,children:e.jsx(me,{linkComponent:"a",children:e.jsx(ge,{})})})}ae.createRoot(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(xe,{})}));
